import{F as W,b as w,e as B,f as F,g as H,i as R,j as $,k as N,l as j,m as A,n as L,o as V,p as z,q,t as J,w as G,x as K,y as Q}from"./chunk-THKJQT2E.js";import{C as m,D as a,E as o,F as d,L as C,M as P,N as f,U as I,V as p,W as u,X as E,aa as y,da as v,ea as S,ga as M,ia as O,j as h,ja as k,jb as D,k as x,ma as T,oa as U,r as c,s as _,u as b,y as g}from"./chunk-MYLL6R6N.js";import"./chunk-CI4HLPRH.js";import"./chunk-E45MTVME.js";import"./chunk-WM6UOLYJ.js";import"./chunk-N5Q5NTLR.js";import"./chunk-JRYKI6H5.js";import"./chunk-GIIU5PV3.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-LRFGNCHE.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-2R6CW7ES.js";function Y(e,l){if(e&1){let r=C();a(0,"ion-item")(1,"ion-thumbnail",4),d(2,"ion-img",8),o(),a(3,"ion-label")(4,"h2"),p(5),o(),a(6,"p"),p(7),o()(),a(8,"ion-button",9),P("click",function(){let n=h(r),i=n.$implicit,s=n.index,X=f(3);return x(X.reproducirCancion(i,s))}),d(9,"ion-icon",10),o()()}if(e&2){let r=l.$implicit;c(2),m("src",r.portadaUrl||"assets/placeholder.png"),c(3),u(r.titulo),c(2),E("",r.artista," - ",r.genero)}}function Z(e,l){if(e&1&&(a(0,"ion-list"),g(1,Y,10,4,"ion-item",7),o()),e&2){let r=f(2);c(),m("ngForOf",r.playlist.canciones)}}function tt(e,l){e&1&&(a(0,"ion-item")(1,"ion-label"),p(2,"No hay canciones en esta playlist"),o()())}function et(e,l){if(e&1&&(a(0,"ion-content")(1,"ion-header")(2,"ion-toolbar",3)(3,"ion-buttons",4),d(4,"ion-back-button",5),o(),a(5,"ion-title"),p(6),o()()(),a(7,"ion-card",6)(8,"ion-card-header")(9,"ion-card-title"),p(10),o(),a(11,"ion-card-subtitle"),p(12),o()()(),g(13,Z,2,1,"ion-list",2)(14,tt,3,0,"ng-template",null,1,y),o()),e&2){let r=I(15),t=f();c(6),u(t.playlist==null?null:t.playlist.nombre),c(4),u(t.playlist==null?null:t.playlist.nombre),c(2),u(t.playlist==null?null:t.playlist.descripcion),c(),m("ngIf",(t.playlist==null||t.playlist.canciones==null?null:t.playlist.canciones.length)>0)("ngIfElse",r)}}function nt(e,l){e&1&&(a(0,"ion-content",11),d(1,"ion-spinner",12),o())}var it="https://ring-town-backend.onrender.com",dt=(()=>{let l=class l{constructor(t,n,i){this.route=t,this.http=n,this.router=i,this.playlist=null,this.cargando=!0}ngOnInit(){let t=this.route.snapshot.paramMap.get("id"),n=localStorage.getItem("token")||"";if(t){let i=new O().set("Authorization",`Bearer ${n}`);this.http.get(`${it}/music/playlists/${t}`,{headers:i}).subscribe({next:s=>{this.playlist=s,this.cargando=!1},error:s=>{console.error("Error al cargar playlist:",s),this.cargando=!1}})}}reproducirCancion(t,n){this.router.navigate(["/reproductor"],{queryParams:{audioUrl:t.audioUrl,titulo:t.titulo,artista:t.artista,portadaUrl:t.portadaUrl,cancionId:t._id,playlistCanciones:JSON.stringify(this.playlist.canciones.map(i=>({audioUrl:i.audioUrl,titulo:i.titulo,artista:i.artista,portadaUrl:i.portadaUrl,cancionId:i._id}))),currentIndex:n}})}};l.\u0275fac=function(n){return new(n||l)(_(T),_(k),_(U))},l.\u0275cmp=b({type:l,selectors:[["app-playlist-detalle"]],decls:3,vars:2,consts:[["cargandoPlantilla",""],["sinCanciones",""],[4,"ngIf","ngIfElse"],["color","dark"],["slot","start"],["defaultHref","/tabs/tab2"],[1,"ion-margin"],[4,"ngFor","ngForOf"],[3,"src"],["fill","clear","slot","end",3,"click"],["name","play-circle-outline"],[1,"ion-padding"],["name","dots"]],template:function(n,i){if(n&1&&g(0,et,16,5,"ion-content",2)(1,nt,2,0,"ng-template",null,0,y),n&2){let s=I(2);m("ngIf",!i.cargando)("ngIfElse",s)}},dependencies:[M,v,S,D,j,A,Q,K,H,N,$,q,V,z,G,L,J,w,F,R,B,W],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: #121212;--color: #1DB954}ion-title[_ngcontent-%COMP%]{font-weight:700}ion-card[_ngcontent-%COMP%]{background:#181818;color:#fff}ion-item[_ngcontent-%COMP%]{--background: #202020;color:#fff}ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700;color:#1db954}ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;color:#ccc}"]});let e=l;return e})();export{dt as PlaylistDetallePage};
